# README.md

# Python Audio Dataset Creator

AI音声学習用の高品質な音声データセットを作成するための総合ツールです。  
複数のテキストファイルから1行ずつ台本を読み込み、各行に対して音声を録音し、  
「音声ファイル | 対応テキスト」のペアをメタデータとして保存します。

## ✨ 主な機能

- 📚 **複数テキストファイル対応**: `cocoro.txt`, `japanese.txt`など複数の原稿を統合管理
- 🎙️ **高品質録音**: 44.1kHz/16bit WAVファイルで録音
- ⏸️ **録音制御**: 録音の開始・一時停止・再開・停止が可能
- 🔄 **セッション管理**: 作業を中断・再開できる自動セーブ機能
- 📊 **進捗管理**: リアルタイムで録音進捗を表示
- 🎯 **柔軟なナビゲーション**: 任意の行にジャンプして録音可能
- 🔊 **音声プレビュー**: 録音した音声をその場で再生確認

---

## 📁 プロジェクト構成

```
Python_Audio_dataset/
├── src/
│   ├── main.py              # メインアプリケーション
│   ├── text_manager.py      # テキスト・セッション管理
│   └── audio_recorder.py    # 音声録音・再生機能
├── script/
│   ├── check_audio_devices.py  # 音声デバイス確認ツール
│   └── test_imports.py         # ライブラリ動作確認
├── data/
│   └── input/               # 原稿テキストファイル置き場
│       ├── cocoro.txt       # 夏目漱石「こころ」（サンプル）
│       └── japanese.txt     # 日本語音素練習用テキスト
├── dataset/
│   ├── audio_files/         # 録音された音声ファイル(.wav)
│   ├── meta_files/          # 各音声に対応するテキストファイル
│   └── metadata.txt         # 全体のメタデータ（音声ファイル|テキスト）
└── requirements.txt         # 必要なPythonパッケージ
```

---

## 🚀 セットアップ

### 1. 環境準備（conda推奨）

```bash
# conda環境を作成
conda create -n audio_dataset python=3.9
conda activate audio_dataset

# 必要なパッケージをインストール
pip install -r requirements.txt
```

### 2. 音声デバイス確認

```bash
# マイクとスピーカーの動作確認
python script/check_audio_devices.py
```

### 3. ライブラリ動作確認

```bash
# インストールされたライブラリの確認
python script/test_imports.py
```

---

## 📝 原稿ファイルの準備

### cocoro.txtの作成方法

`data/input/cocoro.txt`には夏目漱石の「こころ」の一部が含まれています。  
以下の形式で原稿を作成してください：

```
私はその人を、いつも先生と呼んでいました。
だからこの文章でも、本名は明かさずに先生とだけ書くことにします。
誰かに遠慮しているわけではありません。
```

### 原稿作成のガイドライン

- **1行1文**: 各行に1つの文章を記述
- **UTF-8エンコーディング**: 日本語の文字化けを防ぐため
- **適度な長さ**: 1文あたり10-50文字程度が録音しやすい
- **空行スキップ**: 空行は自動的に無視されます

### 推奨原稿の種類

- **文学作品**: 「こころ」「銀河鉄道の夜」など著作権切れの名作
- **音素練習**: あいうえお、かきくけこなど日本語の全音素
- **専門用語**: 特定分野の用語集
- **日常会話**: 自然な話し言葉のサンプル

---

## 🎮 使用方法

### 基本操作

```bash
# メインプログラムを実行
python src/main.py
```

### 操作コマンド

| コマンド | 機能 |
|---------|------|
| `r` | 録音開始/再開（3秒カウントダウン後） |
| `p` | 録音一時停止 |
| `s` | 録音停止・保存 |
| `l` | 録音音声の再生 |
| `n` | 次の台本へ移動 |
| `b` | 前の台本へ移動 |
| `j` | 指定行にジャンプ |
| `q` | プログラム終了 |

### 画面表示

```
🎙️  AI音声学習用データセット作成ツール
============================================================
📄 原稿ファイル: cocoro.txt
📝 台本 (5/120): 先生を思い出すたび、私の口からは自然と「先生」という言葉が出てきます。
📊 進捗: 4/120 録音済み (3.3%)
📍 状態: ⭕ 未録音
```

---

## 🔧 技術仕様

### 音声録音設定

- **ファイル形式**: WAV
- **サンプルレート**: 44.1kHz（CD品質）
- **ビット深度**: 16-bit
- **チャンネル**: 1（モノラル）
- **録音デバイス**: デフォルトマイク（自動選択）

### ファイル命名規則

- **音声ファイル**: `audio_[原稿名]_[行番号].wav`
  - 例: `audio_cocoro.txt_0001.wav`
- **メタテキスト**: `meta_[原稿名]_[行番号].txt`
  - 例: `meta_cocoro.txt_0001.txt`

### セッション管理

- 作業状況は`data/session.json`に自動保存
- プログラム再起動時に続きから作業可能
- 録音済み/未録音の状態を自動追跡

---

## 📊 データセット出力

### 生成されるファイル

1. **音声ファイル**: `dataset/audio_files/`
   - 各台本に対応するWAVファイル
   
2. **個別テキスト**: `dataset/meta_files/`
   - 各音声に対応するテキストファイル
   
3. **統合メタデータ**: `dataset/metadata.txt`
   - AI学習用の統合データセット
   - 形式: `音声ファイル名|対応テキスト`

### データセット例

```
# metadata.txt
audio_cocoro.txt_0001.wav|私はその人を、いつも先生と呼んでいました。
audio_cocoro.txt_0002.wav|だからこの文章でも、本名は明かさずに先生とだけ書くことにします。
audio_japanese.txt_0001.wav|あいうえおかきくけこさしすせそ
```

---

## 🔍 トラブルシューティング

### マイクが認識されない

```bash
# 音声デバイスを確認
python script/check_audio_devices.py

# sounddeviceの再インストール
pip uninstall sounddevice
pip install sounddevice
```

### 録音音質が悪い

1. マイクの位置を調整（口から20-30cm）
2. 静かな環境で録音
3. マイクの音量レベルを確認

### ファイルが保存されない

- `dataset/`フォルダのアクセス権限を確認
- ディスク容量を確認
- ウイルス対策ソフトの干渉を確認

---

## 🛡️ プライバシー・セキュリティ

- **個人データ保護**: 録音ファイルはローカルのみに保存
- **Git除外設定**: 音声データと個人原稿は`.gitignore`で除外
- **セッション暗号化**: 将来のバージョンで対応予定

---

## 🎯 AI音声モデル学習での活用

### 推奨データセット規模

- **最小**: 30分（基本的な音声合成）
- **推奨**: 60-120分（高品質な音声合成）
- **最適**: 3-5時間（プロレベルの音声合成）

### 学習時の注意点

1. **音質の一貫性**: 同じ環境・機材で録音
2. **話し方の統一**: 同じ話速・トーンを維持
3. **音素の網羅**: 日本語の全音素を含むテキストを使用

---

## 📈 今後の開発予定

- [ ] 音声品質の自動評価機能
- [ ] ノイズ除去機能
- [ ] バッチ処理モード
- [ ] Web UI版の開発
- [ ] 多言語対応

---

## 📄 ライセンス

このプロジェクトはオープンソースです。教育・研究目的での利用を推奨します。

## 🤝 貢献

バグ報告、機能提案、プルリクエストを歓迎します。

---

**AI音声学習用の高品質データセット作成を簡単に！**